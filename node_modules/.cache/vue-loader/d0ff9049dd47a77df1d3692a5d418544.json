{"remainingRequest":"C:\\Users\\hu_xiaoshan\\hxs\\vue-test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\hu_xiaoshan\\hxs\\vue-test\\src\\components\\shop-cart\\shop-cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\hu_xiaoshan\\hxs\\vue-test\\src\\components\\shop-cart\\shop-cart.vue","mtime":1585814671691},{"path":"C:\\Users\\hu_xiaoshan\\hxs\\vue-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hu_xiaoshan\\hxs\\vue-test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\hu_xiaoshan\\hxs\\vue-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hu_xiaoshan\\hxs\\vue-test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCdWJibGUgZnJvbSAnY29tcG9uZW50cy9idWJibGUvYnViYmxlJwoKY29uc3QgQkFMTF9MRU4gPSAxMAoKY29uc3QgaW5uZXJDbHNIb29rID0gJ2lubmVyLWhvb2snCmZ1bmN0aW9uIGNyZWF0ZUJhbGxzICgpIHsKICBjb25zdCBiYWxscyA9IFtdCiAgZm9yIChsZXQgaSA9IDA7IGkgPCBCQUxMX0xFTjsgaSsrKSB7CiAgICBiYWxscy5wdXNoKHsKICAgICAgc2hvdzogZmFsc2UKICAgIH0pCiAgfQogIHJldHVybiBiYWxscwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3Nob3AtY2FydCcsCiAgcHJvcHM6IHsKICAgIGRlbGl2ZXJ5UHJpY2U6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiAwCiAgICAgIH0KICAgIH0sCiAgICBtaW5QcmljZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDAKICAgIH0sCiAgICBzZWxlY3RGb29kczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCAoKSB7CiAgICAgICAgcmV0dXJuIFtdCiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBiYWxsczogY3JlYXRlQmFsbHMoKQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRvdGFsUHJpY2UoKSB7CiAgICAgIGxldCBwcmljZSA9IDAKICAgICAgdGhpcy5zZWxlY3RGb29kcy5mb3JFYWNoKChmb29kKSA9PiB7CiAgICAgICAgaWYgKGZvb2QuY291bnQpIHsKICAgICAgICAgIHByaWNlICs9IGZvb2QuY291bnQgKiBmb29kLnByaWNlCiAgICAgICAgfQogICAgICB9KQogICAgICByZXR1cm4gcHJpY2UKICAgIH0sCiAgICB0b3RhbENvdW50KCkgewogICAgICBsZXQgY291bnQgPSAwCiAgICAgIHRoaXMuc2VsZWN0Rm9vZHMuZm9yRWFjaCgoZm9vZCkgPT4gewogICAgICAgIGlmIChmb29kLmNvdW50KSB7CiAgICAgICAgICBjb3VudCArPSBmb29kLmNvdW50CiAgICAgICAgfQogICAgICB9KQogICAgICByZXR1cm4gY291bnQKICAgIH0sCiAgICBwYXlDbGFzcygpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0Rm9vZHMuY291bnQgfHwgdGhpcy50b3RhbFByaWNlIDwgdGhpcy5taW5QcmljZSkgewogICAgICAgIHJldHVybiAnbm90LWVub3VnaCcKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJ2Vub3VnaCcKICAgICAgfQogICAgfSwKICAgIHBheURlc2MoKSB7CiAgICAgIGlmICh0aGlzLnRvdGFsUHJpY2UgPT09IDApIHsKICAgICAgICByZXR1cm4gYO+/pSR7dGhpcy5taW5QcmljZX3lhYPotbfpgIFgCiAgICAgIH0gZWxzZSBpZiAodGhpcy50b3RhbFByaWNlIDwgdGhpcy5taW5QcmljZSkgewogICAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLm1pblByaWNlIC0gdGhpcy50b3RhbFByaWNlCiAgICAgICAgcmV0dXJuIGDov5jlt64ke2RpZmZ95YWD6LW36YCBYAogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAn5Y6757uT566XJwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIHRoaXMuZHJvcEJhbGxzID0gW10KICAgIHRoaXMubGlzdEZvbGQgPSB0cnVlCiAgICB0aGlzLnNob3BDYXJ0TGlzdENvbXAgPSB0aGlzLnNob3BDYXJ0TGlzdENvbXAgfHwgdGhpcy4kY3JlYXRlU2hvcENhcnRMaXN0KHsKICAgICAgJHByb3BzOiB7CiAgICAgICAgc2VsZWN0Rm9vZHM6ICdzZWxlY3RGb29kcycKICAgICAgfSwKICAgICAgJGV2ZW50czogewogICAgICAgIGhpZGU6ICgpID0+IHsKICAgICAgICAgIHRoaXMubGlzdEZvbGQgPSB0cnVlCiAgICAgICAgfQogICAgICB9CiAgICB9KQogIH0sCiAgbWV0aG9kczogewogICAgZHJvcChlbCkgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmFsbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoIXRoaXMuYmFsbHNbaV0uc2hvdykgewogICAgICAgICAgY29uc3QgYmFsbCA9IHRoaXMuYmFsbHNbaV0KICAgICAgICAgIGJhbGwuc2hvdyA9IHRydWUKICAgICAgICAgIGJhbGwuZWwgPSBlbAogICAgICAgICAgdGhpcy5kcm9wQmFsbHMucHVzaChiYWxsKQogICAgICAgICAgLy8gY29uc29sZS5sb2coYmFsbC5zaG93KQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdG9nZ2xlTGlzdCgpIHsKICAgICAgaWYgKHRoaXMubGlzdEZvbGQpIHsKICAgICAgICBpZiAoIXRoaXMudG90YWxDb3VudCkgewogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIHRoaXMubGlzdEZvbGQgPSBmYWxzZQogICAgICAgIHRoaXMuX3Nob3dTaG9wQ2FydExpc3QoKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubGlzdEZvbGQgPSB0cnVlCiAgICAgICAgdGhpcy5faGlkZVNob3BDYXJ0TGlzdCgpCiAgICAgIH0KICAgIH0sCiAgICBfc2hvd1Nob3BDYXJ0TGlzdCgpIHsKICAgICAgdGhpcy5zaG9wQ2FydExpc3RDb21wLnNob3coKQogICAgfSwKICAgIF9oaWRlU2hvcENhcnRMaXN0KCkgewogICAgICB0aGlzLnNob3BDYXJ0TGlzdENvbXAuaGlkZSgpCiAgICB9LAogICAgYmVmb3JlRHJvcChlbCkgewogICAgICBjb25zdCBiYWxsID0gdGhpcy5kcm9wQmFsbHNbdGhpcy5kcm9wQmFsbHMubGVuZ3RoIC0gMV0KICAgICAgY29uc3QgcmVjdCA9IGJhbGwuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKICAgICAgY29uc3QgeCA9IHJlY3QubGVmdCAtIDMyCiAgICAgIGNvbnN0IHkgPSAtKHdpbmRvdy5pbm5lckhlaWdodCAtIHJlY3QudG9wIC0gMjIpCiAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnJwogICAgICBlbC5zdHlsZS50cmFuc2Zvcm0gPSBlbC5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoMCwgJHt5fXB4LCAwKWAKICAgICAgY29uc3QgaW5uZXIgPSBlbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGlubmVyQ2xzSG9vaylbMF0KICAgICAgaW5uZXIuc3R5bGUudHJhbnNmb3JtID0gaW5uZXIuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7eH1weCwgMCwgMClgCiAgICB9LAogICAgZHJvcHBpbmcoZWwsIGRvbmUpIHsKICAgICAgdGhpcy5fcmVmbG93ID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQKICAgICAgZWwuc3R5bGUudHJhbnNmb3JtID0gZWwuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsIDAsIDApJwogICAgICBjb25zdCBpbm5lciA9IGVsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaW5uZXJDbHNIb29rKVswXQogICAgICBpbm5lci5zdHlsZS50cmFuc2Zvcm0gPSBpbm5lci5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgMCwgMCknCiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBkb25lKQogICAgfSwKICAgIGFmdGVyRHJvcChlbCkgewogICAgICBjb25zdCBiYWxsID0gdGhpcy5kcm9wQmFsbHMuc2hpZnQoKQogICAgICBpZiAoYmFsbCkgewogICAgICAgIGJhbGwuc2hvdyA9IGZhbHNlCiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJwogICAgICB9CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBCdWJibGUKICB9Cn0K"},{"version":3,"sources":["shop-cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shop-cart.vue","sourceRoot":"src/components/shop-cart","sourcesContent":["<template>\r\n<div class=\"shop-cart\">\r\n  <div class=\"content\" @click=\"toggleList\">\r\n    <div class=\"content-left\">\r\n      <div class=\"logo-wrapper\">\r\n        <div class=\"logo\" :class=\"{'highlight': totalCount>0}\">\r\n          <i class=\"icon-shopping_cart\" :class=\"{'highlight': totalCount>0}\"></i>\r\n        </div>\r\n        <div class=\"num\" v-show=\"totalCount>0\">\r\n          <bubble :num=\"totalCount\"></bubble>\r\n        </div>\r\n      </div>\r\n      <div class=\"price\" :class=\"{'highlight': totalPrice>0}\">￥{{totalPrice}}</div>\r\n      <div class=\"desc\">另需配送费{{deliveryPrice}}</div>\r\n    </div>\r\n    <div class=\"content-right\">\r\n      <div class=\"pay\" :class=\"payClass\">{{payDesc}}</div>\r\n    </div>\r\n  </div>\r\n  <div class=\"ball-container\">\r\n    <div v-for=\"(ball,index) in balls\" :key=\"index\">\r\n      <transition\r\n        @before-enter=\"beforeDrop\"\r\n        @enter=\"dropping\"\r\n        @after-enter=\"afterDrop\"\r\n      >\r\n        <div class=\"ball\" v-show=\"ball.show\">\r\n          <div class=\"inner inner-hook\"></div>\r\n        </div>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\n  import Bubble from 'components/bubble/bubble'\r\n\r\n  const BALL_LEN = 10\r\n\r\n  const innerClsHook = 'inner-hook'\r\n  function createBalls () {\r\n    const balls = []\r\n    for (let i = 0; i < BALL_LEN; i++) {\r\n      balls.push({\r\n        show: false\r\n      })\r\n    }\r\n    return balls\r\n  }\r\n\r\n  export default {\r\n    name: 'shop-cart',\r\n    props: {\r\n      deliveryPrice: {\r\n        type: Number,\r\n        default() {\r\n          return 0\r\n        }\r\n      },\r\n      minPrice: {\r\n        type: Number,\r\n        default: 0\r\n      },\r\n      selectFoods: {\r\n        type: Array,\r\n        default () {\r\n          return []\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        balls: createBalls()\r\n      }\r\n    },\r\n    computed: {\r\n      totalPrice() {\r\n        let price = 0\r\n        this.selectFoods.forEach((food) => {\r\n          if (food.count) {\r\n            price += food.count * food.price\r\n          }\r\n        })\r\n        return price\r\n      },\r\n      totalCount() {\r\n        let count = 0\r\n        this.selectFoods.forEach((food) => {\r\n          if (food.count) {\r\n            count += food.count\r\n          }\r\n        })\r\n        return count\r\n      },\r\n      payClass() {\r\n        if (this.selectFoods.count || this.totalPrice < this.minPrice) {\r\n          return 'not-enough'\r\n        } else {\r\n          return 'enough'\r\n        }\r\n      },\r\n      payDesc() {\r\n        if (this.totalPrice === 0) {\r\n          return `￥${this.minPrice}元起送`\r\n        } else if (this.totalPrice < this.minPrice) {\r\n          const diff = this.minPrice - this.totalPrice\r\n          return `还差${diff}元起送`\r\n        } else {\r\n          return '去结算'\r\n        }\r\n      }\r\n    },\r\n    created () {\r\n      this.dropBalls = []\r\n      this.listFold = true\r\n      this.shopCartListComp = this.shopCartListComp || this.$createShopCartList({\r\n        $props: {\r\n          selectFoods: 'selectFoods'\r\n        },\r\n        $events: {\r\n          hide: () => {\r\n            this.listFold = true\r\n          }\r\n        }\r\n      })\r\n    },\r\n    methods: {\r\n      drop(el) {\r\n        for (let i = 0; i < this.balls.length; i++) {\r\n          if (!this.balls[i].show) {\r\n            const ball = this.balls[i]\r\n            ball.show = true\r\n            ball.el = el\r\n            this.dropBalls.push(ball)\r\n            // console.log(ball.show)\r\n            return\r\n          }\r\n        }\r\n      },\r\n      toggleList() {\r\n        if (this.listFold) {\r\n          if (!this.totalCount) {\r\n            return\r\n          }\r\n          this.listFold = false\r\n          this._showShopCartList()\r\n        } else {\r\n          this.listFold = true\r\n          this._hideShopCartList()\r\n        }\r\n      },\r\n      _showShopCartList() {\r\n        this.shopCartListComp.show()\r\n      },\r\n      _hideShopCartList() {\r\n        this.shopCartListComp.hide()\r\n      },\r\n      beforeDrop(el) {\r\n        const ball = this.dropBalls[this.dropBalls.length - 1]\r\n        const rect = ball.el.getBoundingClientRect()\r\n        const x = rect.left - 32\r\n        const y = -(window.innerHeight - rect.top - 22)\r\n        el.style.display = ''\r\n        el.style.transform = el.style.webkitTransform = `translate3d(0, ${y}px, 0)`\r\n        const inner = el.getElementsByClassName(innerClsHook)[0]\r\n        inner.style.transform = inner.style.webkitTransform = `translate3d(${x}px, 0, 0)`\r\n      },\r\n      dropping(el, done) {\r\n        this._reflow = document.body.offsetHeight\r\n        el.style.transform = el.style.webkitTransform = 'translate3d(0, 0, 0)'\r\n        const inner = el.getElementsByClassName(innerClsHook)[0]\r\n        inner.style.transform = inner.style.webkitTransform = 'translate3d(0, 0, 0)'\r\n        el.addEventListener('transitionend', done)\r\n      },\r\n      afterDrop(el) {\r\n        const ball = this.dropBalls.shift()\r\n        if (ball) {\r\n          ball.show = false\r\n          el.style.display = 'none'\r\n        }\r\n      }\r\n    },\r\n    components: {\r\n      Bubble\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  @import \"~common/stylus/mixin\"\r\n  @import \"~common/stylus/variable\"\r\n  .shop-cart\r\n    height: 100%\r\n    .content\r\n      display: flex\r\n      background-color: $color-background\r\n      color: $color-light-grey\r\n      .content-left\r\n        flex: 1\r\n        .logo-wrapper\r\n          position: relative\r\n          display: inline-block\r\n          vertical-align: top\r\n          top: -10px\r\n          margin: 0 12px\r\n          padding: 6px\r\n          height: 56px\r\n          width: 56px\r\n          box-sizing: border-box\r\n          border-radius: 50%\r\n          background-color: $color-background\r\n          .logo\r\n            width: 100%\r\n            height: 100%\r\n            border-radius: 50%\r\n            text-align: center\r\n            background-color: $color-dark-grey\r\n            &.highlight\r\n              background-color: $color-blue\r\n            .icon-shopping_cart\r\n              line-height: 44px\r\n              font-size: $fontsize-large-xxx\r\n              color: $color-light-grey\r\n              &.highlight\r\n                color: $color-white\r\n          .num\r\n            position: absolute\r\n            top: 0\r\n            right: 0\r\n        .price\r\n          display: inline-block\r\n          vertical-align: top\r\n          margin-top: 12px\r\n          padding-right: 12px\r\n          box-sizing: border-box\r\n          border-right: 1px solid rgba(255, 255, 255, 0.1)\r\n          font-weight: 700\r\n          font-size: $fontsize-large\r\n          &.highlight\r\n            color: $color-white\r\n        .desc\r\n          display: inline-block\r\n          vertical-align: top\r\n          margin: 12px 0 0 12px\r\n          line-height: 24px\r\n          font-size: $fontsize-small-s\r\n      .content-right\r\n        flex: 0 0 105px\r\n        .pay\r\n          height: 48px\r\n          line-height: 48px\r\n          text-align: center\r\n          font-weight: 700\r\n          font-size: $fontsize-small\r\n          &.not-enough\r\n            background-color: $color-dark-grey\r\n          &.enough\r\n            background: $color-green\r\n            color: $color-white\r\n    .ball-container\r\n      .ball\r\n        position: fixed\r\n        left: 32px\r\n        bottom: 22px\r\n        z-index: 200\r\n        transition: all 0.4s cubic-bezier(0.49, -0.29, 0.75, 0.41)\r\n        .inner\r\n          width: 16px\r\n          height: 16px\r\n          border-radius: 50%\r\n          background-color: $color-blue\r\n          transition: all 0.4s linear\r\n</style>\r\n"]}]}